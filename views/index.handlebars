<div class="index-container">
  <i class="fas fa-globe index-main-icon"></i>
  <form class="needs-validation" novalidate action="/" method="POST">
    <input class="form-control mt-3" type="url" placeholder="Please enter URL..." name="normalUrl" required>
    <div class="invalid-feedback">
      Please enter URL!
    </div>
    <div class="row justify-content-center">
      <button type="submit" class="btn btn-outline-danger mt-3" id="submit-button">Go!</button>
    </div>
  </form>

  <div class="long-url mt-3">
    <p class="mt-3 text-center">Original URL</p>
    <input class="form-control" type="text" value="{{long}}" disabled>
  </div>
  <div class="short-url mt-3">
    <p class="mt-3 text-center">Short URL</p>
    <p>{{message}}</p>
    <div class="d-flex justify-content-between copy-section">
      <input class="form-control short-url-input" type="text" value="{{short}}">
      <button type="submit" class="btn btn-info copy-button">Copy URL</button>
    </div>
  </div>
</div>

{{!-- bootstrap validation --}}
<script>
  (function () {
    'use strict';
    window.addEventListener('load', function () {
      // Fetch all the forms we want to apply custom Bootstrap validation styles to
      var forms = document.getElementsByClassName('needs-validation');
      // Loop over them and prevent submission
      var validation = Array.prototype.filter.call(forms, function (form) {
        form.addEventListener('submit', function (event) {
          if (form.checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    }, false);
  })();

  // copy url
  const copySection = document.querySelector('.copy-section')
  const url = document.querySelector('.short-url-input')
  copySection.addEventListener('click', function() {
    if(event.target.classList.contains('copy-button')) {
      let copyUrl = url.value
      url.focus();
      url.select();
      document.execCommand('copy');
      alert('URL is already copied!')
    }
  })
  
</script>